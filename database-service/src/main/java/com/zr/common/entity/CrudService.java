package com.zr.common.entity;

import com.zr.entity.BaseService;
import com.zr.entity.DataEntity;
import org.springframework.beans.factory.annotation.Autowired;

import java.util.List;

/***********************************************************************
 * 文件说明：数据库基础service
 * 创建信息：李晋 2018-10-9 15:17
 * 变更履历： 
 ***********************************************************************/
public class CrudService<D extends ICrudDao<T>, T extends DataEntity> extends BaseService implements ICrudService<T> {

  @Autowired
  protected D dao;

  @Override
  public T get(String id) {
    return dao.get(id);
  }

  @Override
  public T get(T t) {
    return dao.get(t);
  }

  @Override
  public List<T> findList(T t) {
    return dao.findList(t);
  }

  @Override
  public List<T> findAllList() {
    return dao.findAllList();
  }

  public void insert(T t) {
    dao.insert(t);
  }

  public void update(T t) {
    dao.update(t);
  }

  public void save(T t){
    if(t.isNewRecord()){
      t.preInsert();
      insert(t);
    }else {
      t.preUpdate();
      update(t);
    }
  }

  @Override
  public void delete(String id) {
    dao.delete(id);
  }

  @Override
  public void batchDelete(List<String> idList) {
    dao.batchDelete(idList);
  }
}
