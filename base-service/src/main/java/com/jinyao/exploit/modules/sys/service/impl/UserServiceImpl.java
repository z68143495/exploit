package com.jinyao.exploit.modules.sys.service.impl;

import com.jinyao.exploit.common.base.BaseUser;
import com.jinyao.exploit.common.base.Global;
import com.jinyao.exploit.common.base.service.impl.CrudServiceImpl;
import com.jinyao.exploit.common.utils.StringUtils;
import com.jinyao.exploit.common.utils.UserUtils;
import com.jinyao.exploit.modules.sys.dao.UserDao;
import com.jinyao.exploit.modules.sys.entity.User;
import com.jinyao.exploit.modules.sys.service.UserService;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/***********************************************************************
 * 文件说明：自动生成母表service
 * 创建信息：李晋 2018-10-9 15:10
 * 变更履历： 
 ***********************************************************************/
@Service
@Transactional(readOnly = true)
public class UserServiceImpl extends CrudServiceImpl<UserDao, User> implements UserService {

    @Transactional(readOnly = false)
    public boolean save(User user) {
        // 密码加密
        user.setPassword(UserUtils.passwordEncryption(user.getPassword()));
        // 登录状态
        if(StringUtils.isBlank(user.getLoginFlag())){
            user.setLoginFlag(Global.YES);
        }
        return super.save(user);
    }
}
