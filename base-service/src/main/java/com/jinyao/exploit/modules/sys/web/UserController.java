package com.jinyao.exploit.modules.sys.web;

import com.jinyao.exploit.common.base.Page;
import com.jinyao.exploit.common.base.entity.BaseResult;
import com.jinyao.exploit.common.enums.ResponseCode;
import com.jinyao.exploit.modules.sys.entity.User;
import com.jinyao.exploit.modules.sys.service.UserService;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;
import javax.validation.Valid;

/**
 * 用户表Controller
 *
 * @author tm
 * @version 2019/06/29 16:12
 */
@RestController
@RequestMapping(value = "${baseAdminPath}/sys/user")
public class UserController {

    @Resource(name = "userServiceImpl")
    private UserService userService;

    @RequestMapping("list")
    public BaseResult list(User user, HttpServletRequest request){
        return BaseResult.result(ResponseCode.CODE_200, userService.page(new Page<>(request), user.getWrapper()));
    }

    @RequestMapping("save")
    public BaseResult save(@Valid User user){

        return BaseResult.result(userService.save(user));
    }

    @RequestMapping("login")
    public BaseResult login(User user){
        System.out.println(user);
        return BaseResult.result("token-admin");
    }

    @RequestMapping("getByToken")
    public BaseResult login(String token){
        System.out.println(token);
        return BaseResult.result("\"data\":{\"roles\":[\"admin\"],\"introduction\":\"I am a super administrator\",\"avatar\":\"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif\",\"name\":\"Super Admin\"}");
    }

}
