package com.jinyao.exploit.common.base.service.impl;

import com.jinyao.exploit.common.base.dao.CrudDao;
import com.jinyao.exploit.common.base.entity.DataEntity;
import com.jinyao.exploit.common.base.service.CrudService;
import com.jinyao.exploit.common.utils.StringUtils;
import org.springframework.beans.factory.annotation.Autowired;

/***********************************************************************
 * 文件说明：数据库基础service
 * 创建信息：李晋 2018-10-9 15:17
 * 变更履历：
 ***********************************************************************/
public class CrudServiceImpl<D extends CrudDao<T>, T extends DataEntity> extends BaseServiceImpl<D, T> implements CrudService<T> {

   @Autowired
   protected D dao;

   public boolean save(T t){
      if (t.isNewRecord()){
         t.preInsert();
         int result = dao.insert(t);
         return result > 0;
      }else{
         t.preUpdate();
         int result = dao.updateById(t);
         return result > 0;
      }
   }
}
